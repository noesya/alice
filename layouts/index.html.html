<!DOCTYPE html>
<html lang="{{ $.Site.LanguageCode | default "fr" }}">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {{ partial "head/css.html" }}
    {{ partial "head/seo.html" . }}
    {{ partial "head/favicons.html" . }}
    {{ partial "head/rss.html" . }}
    {{ partial "head/script.html" . }}
    {{ partial "head/extras.html" . }}
  </head>
  <body class="{{ partial "GetBodyclass" . }}">
    <main{{ if .Params.contents }} class="page-with-blocks"{{ end }} id="main" tabindex="-1">
      <section id="home" class="screen">
        <div class="container">
          {{ partial "commons/image.html"
            (dict
              "image"    .Params.image
              "sizes"    site.Params.image_sizes.design_system.hero
              "lazy"     false
            ) }}
          <h1>{{ .Title }}</h1>
          <p class="h2">{{ partial "PrepareText" .Params.summary }}</p>
          <div class="introduction">
            {{ range .Params.contents }}
              {{ if eq .template "chapter" }}
                {{ partial "PrepareHTML" .data.text }}
                <div class="small">
                  {{ partial "PrepareText" .data.notes }}
                </div>
              {{ end }}
            {{ end }}
          </div>
        </div>
      </section>
      <div class="screen game" id="game">
        <div class="definitions">
          {{ with site.GetPage "/pages/definitions" }}
            <ul>
              {{ range .Params.contents }}
                {{ if eq .template "chapter" }}
                  <li class="popin" id="{{ urlize .title }}">
                    <article class="definition">
                      <h2 class="h1">{{ .title }}</h2>
                      {{ with .data}}
                        {{ safeHTML .text  }}
                      {{ end }}
                      <a class="close">&times;</a>
                    </article>
                  </li>
                {{ end }}
              {{ end }}
            </ul>
          {{ end }}
        </div>
    
        <div class="cities">
          <ul>
            {{ with site.GetPage "/pages/villes" }}
              {{ range .Pages }}
                <li class="popin popin--offcanvas" id="{{ .Params.slug }}">
                  <div class="city">
                    {{ partial "commons/image.html"
                      (dict
                        "image"    .Params.image
                        "sizes"    site.Params.image_sizes.design_system.hero
                        "lazy"     false
                      ) }}
                    <div class="content">
                      <h2 class="h1">{{ .Title }}</h2>
                      <h3>{{ .Params.summary }}</h3>
                      {{ partial "blocks/list" . }}
                    </div>
                    <a class="close">&times;</a>
                  </div>
                </li>
              {{ end }}
            {{ end }}
          </ul>
        </div>
    
        <div class="game-ui">
          <div class="coins"></div>
          <div class="controls">
            <button data-action="left"><img class="arrow" src=/assets/images/arrows/gauche.svg></button>
            <button data-action="up"><img class="arrow" src=/assets/images/arrows/haut.svg></button>
            <button data-action="down"><img class="arrow" src=/assets/images/arrows/bas.svg></button>
            <button data-action="right"><img class="arrow" src=/assets/images/arrows/droite.svg></button>
          </div>
        </div>
      </div>
    </main>
    {{- partial "footer/plausible.html" . -}}
    {{- partial "footer/js.html" . -}}
    {{- partial "footer/script.html" . -}}
    {{- if not hugo.IsProduction -}}
      {{- partial "footer/debug.html" . -}}
    {{- end -}}
  </body>
</html>
