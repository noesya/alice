<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <title>{{ .Title }}</title>
    <link rel="stylesheet" type="text/css" href="/assets/pagedjs/pagedjs.css" />
    <link rel="stylesheet" type="text/css" href="/assets/pagedjs/interface.css" />
    {{ $styles := resources.Get "sass/print.sass" | toCSS }}
    {{ if hugo.IsProduction }}
      {{ $styles = resources.Get "sass/print.sass" | toCSS | postCSS | minify | fingerprint }}
    {{ end }}
    <link rel="stylesheet" href="{{ $styles.Permalink }}" integrity="{{ $styles.Data.Integrity }}">
  </head>
  <body>
    <section class="cover">
      <img src="/assets/images/print/alice.png">
      <h1>Alice au pays des cryptos</h1>
      <p>Etienne Mineur & Arnaud Levy </p>
    </section>
    <section class="intro">
      {{ with site.GetPage "/" }}
        <h2>{{ .Params.summary }}</h2>
        {{ range .Params.contents }}
          {{ if eq .template "call_to_action" }}
            {{ partial "PrepareHTML" .data.text }}
          {{ end }}
        {{ end }}
      {{ end }}
    </section>
    <section class="intro">
      {{ with site.GetPage "/" }}
        <h2>Crédits</h2>
        {{ range .Params.contents }}
          {{ if eq .template "chapter" }}
            {{ partial "PrepareHTML" .data.notes }}
          {{ end }}
        {{ end }}
      {{ end }}
    </section>
    {{ with site.GetPage "/pages/villes" }}
      {{ range .Pages }}
        <section class="city">
          {{ $media := partial "GetMedia" .Params.image.id }}
          <img class="city__illustration" src="{{ $media.url }}">
          <h2>{{ .Title }}</h2>
          <p><i>{{ .Params.summary }}</i></p>
          {{ range .Params.contents }}
            {{ if eq .template "chapter" }}
              {{ partial "PrepareHTML" .data.text }}
            {{ end }}
          {{ end }}
        </section>
      {{ end }}
    {{ end }}
    <section class="last-page">
      {{ with site.GetPage "/" }}
        <h2>Alice au pays des cryptos</h2>
        {{ range .Params.contents }}
          {{ if eq .template "call_to_action" }}
            {{ partial "PrepareHTML" .data.text }}
          {{ end }}
        {{ end }}
      {{ end }}
    </section>
    <script type="text/javascript" src="/assets/pagedjs/paged.polyfill.min.js" defer async></script>
  </body>
</html>